(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{418:function(t,e,n){var content=n(449);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(45).default)("c1f3e012",content,!0,{sourceMap:!1})},419:function(t,e,n){var content=n(452);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(45).default)("0cfe62d8",content,!0,{sourceMap:!1})},429:function(t,e,n){"use strict";n.r(e);n(28);var o={props:["geo","city","markerId"],data:function(){return{infoWinShow:!1,mapTypeId:"roadmap",infoOptions:{pixelOffset:{width:-15,height:-80}},infoWinOpen:!1,infoWindowPos:{lat:0,lng:0},rank:null,name:null}},methods:{toggleInfoWin:function(t){this.infoWinOpen=!this.infoWinOpen,this.infoWindowPos.lat=t.position.lat,this.infoWindowPos.lng=t.position.lng,this.rank=t.position.rank,this.name=t.position.name},iconOption:function(t){return{url:t.position.rank<=10?"ranked_marker.svg":"normal_marker.svg",size:{width:60,height:90,f:"px",b:"px"},scaledSize:{width:30,height:45,f:"px",b:"px"}}}}},r=(n(448),n(18)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pt-6 pa-0 ma-0",attrs:{fluid:""}},[n("gmap-map",{attrs:{center:t.city.center,"map-type-id":t.mapTypeId,zoom:12}},[t._l(t.geo,(function(e,o){return n("gmap-marker",{key:o,ref:"gmap",refInFor:!0,attrs:{position:e.position,icon:t.iconOption(e),clickable:!0,animation:e.position.id==t.markerId?1:6},on:{click:function(n){return t.toggleInfoWin(e)}}})})),t._v(" "),n("gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(e){t.infoWinOpen=!1}}},[n("span",[t._v(t._s(t.rank)+". "+t._s(t.name))])])],2)],1)}),[],!1,null,"47bafd16",null);e.default=component.exports},448:function(t,e,n){"use strict";var o=n(418);n.n(o).a},449:function(t,e,n){(e=n(44)(!1)).push([t.i,".vue-map-container[data-v-47bafd16]{height:100vh;width:100%}.markerAnimation[data-v-47bafd16]{animation:pulse .5s 2000 alternate;-webkit-animation:pulse .5s 2000 alternate;transform-origin:center;-webkit-transform-origin:center}",""]),t.exports=e},450:function(t,e){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCitySites"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cityid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getCitySites"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cityid"},value:{kind:"Variable",name:{kind:"Name",value:"cityid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"about"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"geo"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:121}};n.loc.source={body:"query GetCitySites($cityid: Float!) {\n  getCitySites(cityid: $cityid) {\n    id\n    name\n    about\n    rank\n    geo\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var o={};function r(t,e){for(var i=0;i<t.definitions.length;i++){var element=t.definitions[i];if(element.name&&element.name.value==e)return element}}n.definitions.forEach((function(t){if(t.name){var e=new Set;!function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var o=e.type;"NamedType"===o.kind&&n.add(o.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}(t,e),o[t.name.value]=e}})),t.exports=n,t.exports.GetCitySites=function(t,e){var n={kind:t.kind,definitions:[r(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var c=o[e]||new Set,l=new Set,d=new Set;for(c.forEach((function(t){d.add(t)}));d.size>0;){var f=d;d=new Set,f.forEach((function(t){l.has(t)||(l.add(t),(o[t]||new Set).forEach((function(t){d.add(t)})))}))}return l.forEach((function(e){var o=r(t,e);o&&n.definitions.push(o)})),n}(n,"GetCitySites")},451:function(t,e,n){"use strict";var o=n(419);n.n(o).a},452:function(t,e,n){(e=n(44)(!1)).push([t.i,'.title[data-v-c1bcc2b6]{font-family:"PT Sans",sans-serif!important;font-weight:700!important;font-size:20px!important;word-break:keep-all}.text[data-v-c1bcc2b6]{font-family:"Open Sans",sans-serif!important;font-weight:400!important;font-size:12px!important}#nav-drawer[data-v-c1bcc2b6]{backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);-moz-backdrop-filter:blur(5px);-o-backdrop-filter:blur(5px);-ms-backdrop-filter:blur(5px)}#exp-panel[data-v-c1bcc2b6],#nav-drawer[data-v-c1bcc2b6]{background-color:transparent}#exp-panel[data-v-c1bcc2b6]{z-index:100}.v-expansion-panel[data-v-c1bcc2b6]:before{box-shadow:none;transition:none;border-radius:none}.v-expansion-panel[data-v-c1bcc2b6]:not(:first-child):after{border-top:none}li[data-v-c1bcc2b6]{text-decoration:none;list-style:none}.v-btn-ex[data-v-c1bcc2b6]{right:0;bottom:0;position:absolute;margin:0 0 16px 16px}#card[data-v-c1bcc2b6]{border-radius:50px;text-align:justify;color:#fff}.floating-button[data-v-c1bcc2b6]{position:fixed;z-index:1;top:10%}.btn[data-v-c1bcc2b6]{width:12px;min-width:0;height:56px;min-height:56px;border-radius:5px}.btn[data-v-c1bcc2b6]:before{background-color:transparent}.btn i[data-v-c1bcc2b6]:hover{transform:scale(2)}.left[data-v-c1bcc2b6]{transform:translateX(340px)}',""]),t.exports=e},468:function(t,e,n){"use strict";n.r(e);n(2),n(28),n(16),n(30),n(3);var o=n(429),r=n(450),c=n.n(r),l={name:"CityInfo",components:{LocMap:o.default},created:function(){null==this.$route.params.city_id&&(this.$apollo.queries.getCitySites.skip=!0,this.goBack())},head:function(){return{title:"Search",meta:[{hid:"description",name:"description",content:"VirTou Search"}]}},apollo:{getCitySites:{prefetch:!0,query:c.a,variables:function(){return{cityid:this.city.id}},error:function(t){console.log(t)}}},mounted:function(){this.$apollo.loading&&(this.setCityInfo(),this.mapHeight())},methods:{clickedMarker:function(t){this.id==t.id?this.id=null:(this.id=t.id,"NaN"==t.geo&&(this.snackbar=!0,this.snackbarText="GeoLocation not Present."))},goBack:function(){this.$router.go(-1)},mapHeight:function(){},getSiteData:function(){var t=this;if(this.geoSites.length<1){this.geoSites=[],this.getCitySites.length>0&&this.getCitySites.forEach((function(e){var n=parseFloat(e.geo.split(",")[0]),o=parseFloat(e.geo.split(",")[1]),r=e.name,c=parseInt(e.rank),l=parseInt(e.id);t.geoSites.push({position:{id:l,lat:n,lng:o,name:r,rank:c}})}))}return this.geoSites},openDrawer:function(){this.drawer=!this.drawer,this.drawer_icon="mdi-chevron-right"==this.drawer_icon?"mdi-chevron-left":"mdi-chevron-right",this.drawer_left=!this.drawer_left},openExpandedDialog:function(t){this.expandedDialog=!0,this.expandedItem=t},closeExpandedDialog:function(){this.expandedDialog=!1,this.expandedItem=""},setCityInfo:function(){this.city.id=parseInt(this.$route.params.city_id),this.city.name=this.$route.params.city_name,this.city.center.lat=parseFloat(this.$route.params.city_geo.split(",")[0]),this.city.center.lng=parseFloat(this.$route.params.city_geo.split(",")[1])}},data:function(){return{id:null,snackbar:!1,snackbarText:"",geoSites:[],navStyle:{},getCitySites:[],on:null,expandedItem:"",expandedDialog:!1,drawer:!1,drawer_icon:"mdi-chevron-right",drawer_left:!1,city:{id:null,name:null,center:{}}}}},d=(n(451),n(18)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0 ma-0",attrs:{fluid:""}},[n("div",{staticClass:"ma-0 pa-0"},[n("v-btn",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"primary--text"},expression:"{class: 'primary--text'}"}],staticClass:"floating-button btn",class:t.drawer_left?"left":"",attrs:{"x-small":""},on:{click:t.openDrawer}},[n("v-icon",t._g({},t.on),[t._v(t._s(t.drawer_icon))])],1)],1),t._v(" "),n("v-navigation-drawer",{staticClass:"pt-10",style:t.navStyle,attrs:{clipped:"",id:"nav-drawer",color:"transparent",width:"340px",permanent:t.drawer,absolute:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("vue-scroll",[n("v-expansion-panels",{attrs:{accordion:"",elevation:"0"}},t._l(t.getCitySites,(function(e){return n("v-expansion-panel",{key:e.site_id,staticClass:"pa-0 ma-0",attrs:{id:"exp-panel",elevation:"4"},on:{click:function(n){return t.clickedMarker(e)}}},[n("v-card",{staticClass:"ma-2 px-1 py-0 scroll",attrs:{id:"card",shaped:"",color:"accent"}},[n("v-expansion-panel-header",[n("v-card-title",{staticClass:"ma-0 pa-0"},[n("h2",{staticClass:"title"},[t._v(t._s(e.rank)+".Â "+t._s(e.name))])])],1),t._v(" "),n("v-expansion-panel-content",{staticClass:"text"},[t._v("\n              "+t._s(e.about)+"\n            ")])],1)],1)})),1)],1)],1),t._v(" "),t.$apollo.loading||null==this.city.id?n("div",{staticClass:"ma-16"},[n("p",[t._v("Loading...")])]):n("div",{ref:"map",attrs:{id:"map"}},[n("LocMap",{attrs:{geo:t.getSiteData(),markerId:t.id,city:t.city}})],1),t._v(" "),n("div",[n("v-snackbar",{attrs:{timeout:2e3},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.attrs;return[n("v-btn",t._b({attrs:{color:"secondary",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",o,!1),[t._v("\n          Close\n        ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n      "+t._s(t.snackbarText)+"\n      ")])],1)],1)}),[],!1,null,"c1bcc2b6",null);e.default=component.exports;installComponents(component,{LocMap:n(429).default})}}]);