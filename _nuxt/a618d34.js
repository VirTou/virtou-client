(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{418:function(e,t,n){var content=n(449);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(45).default)("185988b7",content,!0,{sourceMap:!1})},419:function(e,t,n){var content=n(452);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(45).default)("48c4afba",content,!0,{sourceMap:!1})},429:function(e,t,n){"use strict";n.r(t);var r={props:["geo","city"],data:function(){return{mapTypeId:"roadmap"}}},o=(n(448),n(18)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"pt-6 pa-0 ma-0",attrs:{fluid:""}},[n("gmap-map",{attrs:{center:e.city.center,"map-type-id":e.mapTypeId,zoom:12}},e._l(e.geo,(function(t,r){return n("gmap-marker",{key:r,attrs:{position:t.position},on:{click:function(n){e.center=t.position}}})})),1)],1)}),[],!1,null,"ca3a9c6e",null);t.default=component.exports},448:function(e,t,n){"use strict";var r=n(418);n.n(r).a},449:function(e,t,n){(t=n(44)(!1)).push([e.i,".vue-map-container[data-v-ca3a9c6e]{height:100vh;width:100%}",""]),e.exports=t},450:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCitySites"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cityid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Float"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getCitySites"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cityid"},value:{kind:"Variable",name:{kind:"Name",value:"cityid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"about"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rank"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"geo"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:121}};n.loc.source={body:"query GetCitySites($cityid: Float!) {\n  getCitySites(cityid: $cityid) {\n    id\n    name\n    about\n    rank\n    geo\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.GetCitySites=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var d=r[t]||new Set,c=new Set,l=new Set;for(d.forEach((function(e){l.add(e)}));l.size>0;){var f=l;l=new Set,f.forEach((function(e){c.has(e)||(c.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return c.forEach((function(t){var r=o(e,t);r&&n.definitions.push(r)})),n}(n,"GetCitySites")},451:function(e,t,n){"use strict";var r=n(419);n.n(r).a},452:function(e,t,n){(t=n(44)(!1)).push([e.i,"#nav-drawer[data-v-7dad451c]{backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px);-moz-backdrop-filter:blur(5px);-o-backdrop-filter:blur(5px);-ms-backdrop-filter:blur(5px)}#exp-panel[data-v-7dad451c],#nav-drawer[data-v-7dad451c]{background-color:transparent}#exp-panel[data-v-7dad451c]{z-index:100}.v-expansion-panel[data-v-7dad451c]:before{box-shadow:none;transition:none;border-radius:none}.v-expansion-panel[data-v-7dad451c]:not(:first-child):after{border-top:none}li[data-v-7dad451c]{text-decoration:none;list-style:none}.v-btn-ex[data-v-7dad451c]{right:0;bottom:0;position:absolute;margin:0 0 16px 16px}#card[data-v-7dad451c]{border-radius:50px;text-align:justify;color:#fff}.floating-button[data-v-7dad451c]{position:fixed;z-index:1;top:10%}.btn[data-v-7dad451c]{width:12px;min-width:0;height:56px;min-height:56px;border-radius:0}.btn[data-v-7dad451c]:before{background-color:transparent}.btn i[data-v-7dad451c]:hover{transform:scale(2)}.left[data-v-7dad451c]{transform:translateX(340px)}",""]),e.exports=t},468:function(e,t,n){"use strict";n.r(t);n(2),n(28),n(16),n(30),n(3);var r=n(429),o=n(450),d=n.n(o),c={name:"CityInfo",components:{LocMap:r.default},created:function(){null==this.$route.params.city_id&&(this.$apollo.queries.getCitySites.skip=!0,this.goBack())},head:function(){return{title:"Search",meta:[{hid:"description",name:"description",content:"VirTou Search"}]}},apollo:{getCitySites:{prefetch:!0,query:d.a,variables:function(){return{cityid:this.city.id}},error:function(e){console.log(e)}}},mounted:function(){this.$apollo.loading&&(this.setCityInfo(),this.mapHeight())},methods:{goBack:function(){this.$router.go(-1)},mapHeight:function(){},getGeo:function(){var e=this;if(this.geoSites.length<1){this.geoSites=[],this.getCitySites.length>0&&this.getCitySites.forEach((function(t){var n=parseFloat(t.geo.split(",")[0]),r=parseFloat(t.geo.split(",")[1]),o=t.name;e.geoSites.push({position:{lat:n,lng:r,name:o}})}))}return this.geoSites},openDrawer:function(){this.drawer=!this.drawer,this.drawer_icon="mdi-chevron-right"==this.drawer_icon?"mdi-chevron-left":"mdi-chevron-right",this.drawer_left=!this.drawer_left},openExpandedDialog:function(e){this.expandedDialog=!0,this.expandedItem=e},closeExpandedDialog:function(){this.expandedDialog=!1,this.expandedItem=""},setCityInfo:function(){this.city.id=parseInt(this.$route.params.city_id),this.city.name=this.$route.params.city_name,this.city.center.lat=parseFloat(this.$route.params.city_geo.split(",")[0]),this.city.center.lng=parseFloat(this.$route.params.city_geo.split(",")[1])}},data:function(){return{geoSites:[],navStyle:{},getCitySites:[],on:null,expandedItem:"",expandedDialog:!1,drawer:!1,drawer_icon:"mdi-chevron-right",drawer_left:!1,city:{id:null,name:null,center:{}}}}},l=(n(451),n(18)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"pa-0 ma-0",attrs:{fluid:""}},[n("div",{staticClass:"ma-0 pa-0"},[n("v-btn",{directives:[{name:"ripple",rawName:"v-ripple",value:{class:"primary--text"},expression:"{class: 'primary--text'}"}],staticClass:"floating-button btn",class:e.drawer_left?"left":"",attrs:{"x-small":""},on:{click:e.openDrawer}},[n("v-icon",e._g({},e.on),[e._v(e._s(e.drawer_icon))])],1)],1),e._v(" "),n("v-navigation-drawer",{staticClass:"pt-10",style:e.navStyle,attrs:{clipped:"",id:"nav-drawer",color:"transparent",width:"340px",permanent:e.drawer,absolute:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("vue-scroll",[n("v-expansion-panels",{attrs:{accordion:"",elevation:"0"}},e._l(e.getCitySites,(function(t){return n("v-expansion-panel",{key:t.site_id,staticClass:"pa-0 ma-0",attrs:{id:"exp-panel",elevation:"4"}},[n("v-card",{staticClass:"ma-2 px-3 scroll",attrs:{id:"card",shaped:"",color:"accent"}},[n("v-expansion-panel-header",[n("v-card-title",{staticClass:"ma-0 py-1"},[n("h2",{staticClass:"subtitle-1"},[e._v(e._s(t.name))])])],1),e._v(" "),n("v-expansion-panel-content",[e._v("\n              "+e._s(t.about)+"\n            ")])],1)],1)})),1)],1)],1),e._v(" "),e.$apollo.loading||null==this.city.id?n("div",{staticClass:"ma-16"},[n("p",[e._v("Loading...")])]):n("div",{ref:"map",attrs:{id:"map"}},[n("LocMap",{attrs:{geo:e.getGeo(),city:e.city}})],1)],1)}),[],!1,null,"7dad451c",null);t.default=component.exports;installComponents(component,{LocMap:n(429).default})}}]);